<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>OwnerUpload</title>
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.css">

<link rel="stylesheet" type="text/css" href="/static/css/mstyle.css">

</head>
<body>
		<div style="height:60px;background:#6699cc" >
			<img align="left" src= "/static/images/logo.jpg" />
			<p align="right" > 登录/注册&nbsp;&nbsp;</p>		
		</div>	
		<hr color="#009988"/>
		
		<div style="width:100%;height:60px;background:#66FFcc" >
			
		</div>
		<hr color="#009988" width= "100%"/>
		
        <div >
                <form enctype="multipart/form-data" action="/update_image" method="POST">
                    <div style="display: flex;" > 
                    {% csrf_token %}
                    <select  name= 'type_select' id = "type_select"  class="margin" onchange="changeImageType()">        
                        <option value="animal">动物</option>
                        <option value="plant">植物</option>
                        <option value="people">人物</option>
                        <option value="color">颜色</option>
                </select>
                    <button id="sureUpload" name="update_image" > 刷新图片</button>
                    </div>
                </form>
                </div>
		<div>

 			<hr  color="#009988"/>
		</div>
        <table  border="1px" width="96%">
            <tr  >             
                <td  class="image_size"><div class="block"><{{ img0|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img1|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img2|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img3|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img4|safe }}></div></td>
            </tr>
            
            <tr >             
                <td  class="image_size"><div class="block"><{{ img5|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img6|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img7|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img8|safe }}></div></td>
                <td  class="image_size"><div class="block"><{{ img9|safe }}></div></td>
            </tr>
            
         
        
        </table>
		<hr/>
        
        <div   height="30px" style="display: flex;">
            <!--onsubmit="return false" -->
            <form enctype="multipart/form-data" action="/upload" method="POST"  id = "form_upload" >
                <div style="display: flex;">
                {% csrf_token %}
				<a>上传类别</a>
				<select  name= 'type_select' id = "type_select_upload"  class="margin">        
                        <option value="animal">动物</option>
                        <option value="plant">植物</option>
                        <option value="people">人物</option>
                        <option value="color">颜色</option>
                </select>

                <a href="javascript:;" class="file">选择文件
                <input type="file" name="upload" id = "upload"/></a>
                <button id="sureUpload"  onclick = "on_click_upload()"> 确认上传</button>
				
                
                </div>
            </form> 
			<div style="margin-left:80px">
				<input />
				<button >增加类别</button>
			</div>
			
            <div style="margin-left:80px">
				<button >上一页</button>
				<button >下一页</button>
			</div>
        </div>

		
		<div >
		<p>免责声明：本站所有内容来源于互联网。如果本站部分内容侵犯您的权益，请您告知，站长会立即处理。<a href="http://www.miitbeian.gov.cn/" rel="nofollow">ICP备</a></p>
		<p>Copyright &copy 2010-2018 <a href="/" title="模板之家">图片中心</a>  | www.ouhuayu.top | &nbsp; &nbsp;</p>
		<p><br>站内所有资源仅供学习与参考，请勿用于商业用途，否则产生的一切后果将由您自己承担！</p>
	</div>

<!--
<table cellpadding='0' cellspacing='0' border='0' id="topMenu">
	<tr>
		<td valign="bottom" align="center" style="padding-bottom:5px;">
			<a href="http://www.mycodes.net"><img alt="Home" src="images/1.png" /></a>
			<a href="http://www.mycodes.net"><img alt="Music" src="images/2.png" /></a>
			<a href="http://www.mycodes.net"><img alt="Calendar" src="images/3.png" /></a>
			<a href="http://www.mycodes.net"><img alt="Email" src="images/4.png" /></a>
			<a href="http://www.mycodes.net"><img alt="Portfolio" src="images/5.png" /></a>
			<a href="http://www.mycodes.net"><img alt="Video" src="images/6.png" /></a>
			<a href="http://www.mycodes.net"><img alt="Link" src="images/7.png" /></a> 
		</td>
	</tr>
</table>
-->

<script type="text/javascript">
	function changeImageType()
	{
		var keys=["img1","img2","img3","img4","img5","img6","img7","img8","img9","img10"]
		var id = document.getElementById("image_type");
        alert('changeImageType:' + id)
		var value = id.value;
		var key;
		for(var idx = 0;idx < 10;idx++)
		{
			key = keys[idx];
			var i = document.getElementById(key);
			if (value == "animal") 
			{
				i.src = "images/6.png";
			}
			else if (value == "plant") 
			{
				i.src = "images/7.png";
			}
			else 
			{
				i.src = "images/4.png";
			}
		
		}
		
	}
	
    function on_click_upload() {
        /*
        //alert('on_click_upload')
        var type_select=document.getElementById("type_select")
        alert('on_click_upload,type_select:' + type_select)
        var upload_value=document.getElementById('upload')
        alert('on_click_upload,upload_value:' + upload_value)
        var f=document.createElement('form');
        f.style.display='none';
        f.action='/upload';
        f.method='post';
        //f.target='_blank';  //在新窗口打开
        //var str='<td><input type="hidden" name="n_w_name" value="'+n_w_name+'"/></td>';
        //    str+='<td><input type="hidden" name="n_w_cassize" value="'+n_w_cassize+'"/></td>';
        var str = " <input type='file' name='upload' value=''+ upload_value + ' />' "
            str += " <select  name= 'type_select' id = 'image_type'  class='margin' value=''+type_select + ' />'  "        

        var token = $('meta[name="csrf-token"]').attr('content');
        var csrfField = document.createElement("input");
        csrfField.setAttribute("type", "hidden");
        csrfField.setAttribute("name", "_csrf");
        csrfField.setAttribute("value", token);
 

        f.appendChild(csrfField);
        //f.innerHTML=str;
        document.body.appendChild(f);
        f.submit();
        alert('on_click_upload finish')
        */
        alert("gan");
        
        var type_select=document.getElementById("type_select");
        //alert(type_select)
        var upload=document.getElementById('upload');
        //alert(upload)
        data ={'type_select':type_select.value,'upload':upload.value};
       
        //var form = new FormData(upload);
        //alert(form);
        postdata = {csrfmiddlewaretoken: '{{ csrf_token }}', 'type_select':type_select.value, 'upload':upload.value};
        dd= new FormData($("#form_upload")[0]);
        alert(dd)
        $.ajax({
                //var type_select= $('type_select')
                //alert(type_select)
                //var upload=  $('upload')
                //alert(upload)
                type: "POST",
                dataType: "json",//预期服务器返回的数据类型
                url: "/upload" ,
                data:  dd,
                success: function (result) {
                    console.log(result);//打印服务端返回的数据(调试用)
                    if (result.resultCode == 200) {
                        alert("SUCCESS");
                    }
                    ;
                },
                error : function() {
                    alert("异常！");
                }
            });
}
</script>

<script src="/static/js/jquery-3.4.1.min.js"></script>
</body>
</html>
